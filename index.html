<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± | Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¢Ù…Ù†Ø© Ø¹Ø¨Ø± Ø§Ù„Ù…ØªØµÙØ­</title>
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
        :root {
            --primary: #2563eb;
            --accent: #ef4444;
            --bg: #0f172a;
            --card: #1e293b;
            --white: #f8fafc;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg);
            color: var(--white);
            font-family: system-ui, -apple-system, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .main-container {
            width: 100%;
            max-width: 900px;
            padding: 20px;
            box-sizing: border-box;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª */
        .ad-container {
            width: 100%;
            margin: 15px 0;
            background: var(--card);
            border-radius: 8px;
            min-height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px dashed #475569;
        }

        .header-title {
            text-align: center;
            color: var(--white);
            font-size: 1.4rem;
            margin-bottom: 20px;
        }

        .match-info-card {
            background: var(--card);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            border-right: 5px solid var(--accent);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        #m-name { margin: 0; font-size: 1.6rem; color: var(--white); }
        #m-time { margin: 10px 0 0; color: #94a3b8; font-weight: 500; }

        .player-wrapper {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #334155;
        }

        video { width: 100%; height: 100%; object-fit: contain; }

        .overlay {
            position: absolute;
            inset: 0;
            background: rgba(15, 23, 42, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
        }

        .play-button {
            background: var(--accent);
            color: white;
            border: none;
            padding: 18px 45px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
        }

        .play-button:hover { transform: scale(1.08); background: #dc2626; }

        .status-tag {
            font-size: 0.8rem;
            color: #64748b;
            margin-top: 15px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .header-title { font-size: 1.1rem; }
            #m-name { font-size: 1.2rem; }
            .play-button { padding: 14px 35px; font-size: 1.1rem; }
        }
    </style>
</head>
<body>

    <div class="main-container">
        <h1 class="header-title">ğŸ”´ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± Ø§Ù„Ù…ØªØµÙØ­</h1>

        <div class="ad-container" id="banner-top">
            <p style="color: #475569;">Ø¥Ø¹Ù„Ø§Ù† Ù…ØªÙˆØ§ÙÙ‚ (Banner Space)</p>
        </div>

        <div class="match-info-card">
            <h2 id="m-name">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</h2>
            <div id="m-time">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
        </div>

        <div class="player-wrapper">
            <div class="overlay" id="overlay">
                <button class="play-button" onclick="startPlayer()">â–¶ï¸ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø«</button>
                <span class="status-tag">Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª</span>
            </div>
            <video id="video" controls playsinline></video>
        </div>

        <p style="text-align: center; color: #64748b; font-size: 0.8rem; margin-top: 20px;">
            Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø¨Ø« ÙŠØ¹Ù…Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­ ÙÙ‚Ø· ÙˆÙ„Ø§ ÙŠØ­ØªØ§Ø¬ Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ©.
        </p>
    </div>

    <script>
        // Ø±Ø§Ø¨Ø· CSV Ø§Ù„Ø°ÙŠ Ù‚Ø¯Ù…ØªÙ‡
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQTA1AfMuoKpNaNWmGvHet37YlVYE1ozZQt43OGy9bjNd-9a7YiHyKf2xp3MHzf_WoAagroiGceF1co/pub?output=csv';
        
        let streamSource = "";

        async function updateSheetData() {
            try {
                const res = await fetch(CSV_URL);
                const text = await res.text();
                
                // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø£Ø³Ø·Ø± ÙˆØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ù„Ù…ØµÙÙˆÙØ©
                const rows = text.split('\n').map(row => row.split(','));
                
                // Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„ ØºØ§Ù„Ø¨Ø§Ù‹ Ù‡Ùˆ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† (Match, Time, URL)
                // Ù†Ø£Ø®Ø° Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ (Index 1)
                if (rows.length > 1) {
                    const matchName = rows[1][0].trim();
                    const matchTime = rows[1][1].trim();
                    const matchUrl = rows[1][2].trim();

                    document.getElementById('m-name').innerText = matchName;
                    document.getElementById('m-time').innerText = "ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©: " + matchTime;
                    streamSource = matchUrl;
                }
            } catch (err) {
                console.error("Data Fetch Error:", err);
                document.getElementById('m-name').innerText = "Ø§Ù„Ø¨Ø« ØºÙŠØ± Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹";
            }
        }

        function startPlayer() {
            if (!streamSource || streamSource === "") {
                alert("Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø« Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ Ø¨Ø¹Ø¯ ÙÙŠ Ø§Ù„Ù…Ù„Ù.");
                return;
            }

            const video = document.getElementById('video');
            const overlay = document.getElementById('overlay');

            // Ù…Ù†Ø·Ù‚ ØªØ´ØºÙŠÙ„ HLS
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(streamSource);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    video.play();
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                // Ø¯Ø¹Ù… Safari Ùˆ iOS
                video.src = streamSource;
                video.addEventListener('loadedmetadata', () => {
                    video.play();
                });
            }

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
            overlay.style.display = 'none';
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¨Ø§Ù†Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªØ´ØªØª Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©
            document.getElementById('banner-top').style.visibility = 'hidden';
            document.getElementById('banner-top').style.height = '0px';
            document.getElementById('banner-top').style.margin = '0px';
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        updateSheetData();
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ† ÙÙŠ Ø­Ø§Ù„ ØªØºÙŠØ± Ø§Ù„Ø±Ø§Ø¨Ø·
        setInterval(updateSheetData, 120000);
    </script>
</body>
</html>
