<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>GoalPro</title>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<style>
body { background:#111; color:#fff; font-family:Arial; text-align:center; }
button { margin:5px; padding:10px 20px; cursor:pointer; }
video { width:90%; max-width:800px; margin-top:20px; }
</style>
</head>
<body>
<h1>GoalPro - المباريات</h1>
<div id="match-list">Loading...</div>
<video id="player" controls autoplay></video>

<script>
const sheetURL = "YOUR_SHEET_JSON_URL";
const proxyURL = "https://YOUR-INFHOST.infinityfreeapp.com/proxy.php";

fetch(sheetURL)
.then(r => r.json())
.then(data => {
  const listDiv = document.getElementById("match-list");
  listDiv.innerHTML = "";
  data.forEach(m => {
    const btn = document.createElement("button");
    btn.innerText = `${m.team1} vs ${m.team2} - ${m.time}`;
    btn.onclick = () => play([m.channel1,m.channel2,m.channel3]);
    listDiv.appendChild(btn);
  });
});

function play(channels){
  const video = document.getElementById("player");
  const url = proxyURL + "?channels=" + channels.join(",");
  if(Hls.isSupported()){
    if(video.hls) video.hls.destroy();
    const hls = new Hls();
    video.hls = hls;
    hls.loadSource(url);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,()=> video.play());
  } else {
    video.src = url;
    video.play();
  }
}
</script>
</body>
</html>
