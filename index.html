<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± - Ø§Ù„Ù…ØªØµÙØ­ ÙÙ‚Ø·</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        :root { --main: #2563eb; --dark: #0f172a; --text: #f8fafc; }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--dark); color: var(--text); margin: 0; text-align: center; }
        .wrapper { width: 95%; max-width: 850px; margin: 20px auto; }
        .ad-space { background: #1e293b; padding: 10px; margin: 10px 0; border-radius: 8px; min-height: 90px; }
        .match-box { background: #1e293b; padding: 20px; border-radius: 12px; margin-bottom: 15px; border-bottom: 4px solid var(--main); }
        #player-container { position: relative; background: #000; border-radius: 12px; overflow: hidden; aspect-ratio: 16/9; }
        video { width: 100%; height: 100%; }
        .overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.8); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; }
        .play-btn { background: var(--main); color: white; border: none; padding: 15px 40px; font-size: 1.2rem; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .note { font-size: 0.8rem; color: #94a3b8; margin-top: 10px; }
    </style>
</head>
<body>

<div class="wrapper">
    <h2>ğŸ”´ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± Ø§Ù„Ù…ØªØµÙØ­</h2>

    <div class="ad-space" id="top-ad">
        <div style="color:#475569">Ø¥Ø¹Ù„Ø§Ù† Ù…ØªØ¬Ø§ÙˆØ¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ</div>
    </div>

    <div class="match-box">
        <h3 id="m-name">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</h3>
        <p id="m-time">--:--</p>
    </div>

    <div id="player-container">
        <div class="overlay" id="overlay">
            <button class="play-btn" onclick="initPlayer()">â–¶ï¸ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø«</button>
            <p class="note">ÙŠØ¹Ù…Ù„ Ø¹Ø¨Ø± Ø§Ù„Ù…ØªØµÙØ­ ÙÙ‚Ø·</p>
        </div>
        <video id="video" controls playsinline></video>
    </div>
</div>

<script>
    // Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ CSV Ù…Ù† Google Sheets Ù‡Ù†Ø§
    const CSV_URL = 'Ø¶Ø¹_Ø±Ø§Ø¨Ø·_CSV_Ù‡Ù†Ø§'; 
    let finalStreamUrl = "";

    async function getMatchData() {
        try {
            const response = await fetch(CSV_URL);
            const data = await response.text();
            
            // ØªØ­ÙˆÙŠÙ„ CSV Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ© (ØªØ®Ø·ÙŠ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„)
            const rows = data.split('\n').slice(1);
            if(rows[0]) {
                const [match, time, url] = rows[0].split(',');
                document.getElementById('m-name').innerText = match;
                document.getElementById('m-time').innerText = "Ø§Ù„ØªÙˆÙ‚ÙŠØª: " + time;
                finalStreamUrl = url.trim();
            }
        } catch (e) {
            document.getElementById('m-name').innerText = "Ø®Ø·Ø£ ÙÙŠ Ø§ØªØµØ§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
        }
    }

    function initPlayer() {
        if (!finalStreamUrl) return alert("Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± Ù…ØªØ§Ø­");
        
        const video = document.getElementById('video');
        if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(finalStreamUrl);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = finalStreamUrl;
            video.play();
        }
        
        document.getElementById('overlay').style.display = 'none';
        // Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£ÙƒÙˆØ§Ø¯ Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ù‡Ù†Ø§ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø¥Ø²Ø¹Ø§Ø¬ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
    }

    // Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    getMatchData();
    setInterval(getMatchData, 30000); // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
</script>

</body>
</html>
